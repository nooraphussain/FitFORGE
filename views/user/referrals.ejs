<%- include('../partials/user/header') %>

<main class="style-38">
    <nav class="breadcrumb-cart">
        <div class="container">
            <a href="/shop">Home</a> >
            <a href="/account">My Account</a> >
            <a href="/account/referrals">My Referrals</a>
        </div>
    </nav>
    <h2 class="your-profile" style="margin-left: 150px;">Your Referrals</h2>
    <div style="margin: 0px auto;max-width:1366px;min-width:1128px;box-sizing:border-box;padding:0px;">
        <div style="margin: 0px auto;position:relative;padding:14px 64px 0px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;">
            <!-- navbar -->
            <div style="width: 25%;box-sizing:border-box;margin:0px;padding:0px;">
                <div style="box-sizing:border-box;margin:0px;padding:0px;">

                    <!-- FitFORGE Customer -->
                    <div style="box-sizing:border-box;margin:0px;padding:0px;background-color:#d9d9d9;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.08) 0px 2px 4px 0px;">
                        <div style="padding:12px;margin-bottom:16px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px 0px 16px;">
                            <img height="50px" width="50px" src="/img/profile-pic.svg" style="vertical-align:middle;width: 50px;height:50px;text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;" />
                            <div style="padding:5px 0px 0px 16px;width: calc(100% - 50px);box-sizing:border-box;margin:0px;">
                                <div style="font-size:12px;box-sizing:border-box;margin:0px;padding:0px;">Hello,</div>
                                <div style="padding-top:3px;font-size:16px;font-weight:500;display:flex;align-items:center;text-transform:capitalize;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;margin:0px;"><%= user.name%></div>
                            </div>
                        </div>
                    </div>

                    <!-- the next div -->
                    <div style="margin-bottom:16px;box-sizing:border-box;padding:0px;background-color:#d9d9d9;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.08) 0px 2px 4px 0px;">
                        <div style="box-sizing:border-box;margin:0px;padding:0px;">
                            <div style="padding-bottom:12px;box-sizing:border-box;margin:0px;">
                                <div style="padding:20px 12px 5px 24px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px;">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIxOCIgdmlld0JveD0iMCAwIDI0IDE4Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC04LjY5NCAtMTEpIj48ZWxsaXBzZSBjeD0iMjAuNTU3IiBjeT0iMjAiIHJ4PSIyMC41NTciIHJ5PSIyMCIvPjxwYXRoIGZpbGw9IiMyODc0RjEiIGQ9Ik05IDExdjE3LjEwOGMwIC40OTMuNDEuODkyLjkxOC44OTJoNC45M3YtNS4yNTdoLTMuMDMzbDQuOTEyLTQuNzcgNC45NzIgNC44M2gtMy4wMzVWMjloMTIuNDE3Yy41MDcgMCAuOTE4LS40LjkxOC0uODkyVjExSDl6Ii8+PC9nPjwvc3ZnPg==" 
                                     style="width: 20px; height: 20px; filter: brightness(0) saturate(100%);"/>
                                     <a href="/account/orders" style="width: calc(100% - 26px);padding-left:20px;font-size:16px;font-weight:500;color:rgb(0, 0, 0);cursor:pointer;text-decoration:none solid rgb(135, 135, 135);border:0px none rgb(135, 135, 135);outline:rgb(135, 135, 135) none 0px;box-sizing:border-box;margin:0px;padding:0px 0px 0px 20px;">
                                        MY ORDERS
                                        <span style="margin-top:1px;float:right;box-sizing:border-box;padding:0px;">
                                            <svg width="16" height="27" viewBox="0 0 16 27" xmlns="http://www.w3.org/2000/svg" style="width: 14px;height:14px;transform:matrix(-1, 0, 0, -1, 0, 0);box-sizing:border-box;margin:0px;padding:0px;">
                                                <path d="M16 23.207L6.11 13.161 16 3.093 12.955 0 0 13.161l12.955 13.161z" fill="grey" style="box-sizing:border-box;margin:0px;padding:0px;"></path>
                                            </svg>
                                        </span>
                                     </a>
                                </div>
                            </div>
                            <!-- Account settings -->
                            <div style="border-bottom:1px solid rgb(240, 240, 240);box-sizing:border-box;margin:0px;padding:0px;"></div>
                        </div>

                        <div style="box-sizing:border-box;margin:0px;padding:0px;">
                            <div style="padding-bottom:12px;box-sizing:border-box;margin:0px;">
                                <div style="padding:20px 12px 5px 24px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px;">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMiIgaGVpZ2h0PSIyMSIgdmlld0JveD0iMCAwIDIyIDIxIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05LjY5NCAtMTApIj48cGF0aCBmaWxsPSIjMjg3NEYwIiBkPSJNMTQuMjc1IDIyLjcwNGMyLjI3Mi0uNDEyIDQuMzQ3LS42MTggNi4yMjUtLjYxOCAxLjg3OCAwIDMuOTUzLjIwNiA2LjIyNS42MThhNS4xNSA1LjE1IDAgMCAxIDQuMjMgNS4wNjhWMzFoLTIwLjkxdi0zLjIyOGE1LjE1IDUuMTUgMCAwIDEgNC4yMy01LjA2OHptMS4yNzQtNy43MjRjMC0yLjU4IDIuMTYzLTQuNjczIDQuODMyLTQuNjczIDIuNjY3IDAgNC44MyAyLjA5MiA0LjgzIDQuNjczIDAgMi41OC0yLjE2MyA0LjY3My00LjgzIDQuNjczLTIuNjcgMC00LjgzMy0yLjA5Mi00LjgzMy00LjY3M3oiLz48ZWxsaXBzZSBjeD0iMjAuNTU3IiBjeT0iMjAiIHJ4PSIyMC41NTciIHJ5PSIyMCIvPjwvZz48L3N2Zz4=" 
                                    style="width: 20px;height:20px;text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px; filter: brightness(0) saturate(100%);" />
                                    <div style="padding:0px 0px 12px 20px;font-size:16px;font-weight:500;color:rgb(0, 0, 0);box-sizing:border-box;margin:0px;">ACCOUNT SETTINGS</div>
                                </div>
                                <!-- Account infos -->
                                <div style="box-sizing:border-box;margin:0px;padding:0px;">
                                    <a href="/account" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            Profile Information
                                        </div>
                                    </a>
                                    <a href="/account/addresses" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            Manage Addresses
                                        </div>
                                    </a>
                                    <!-- <a href="/account/pancard" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            PAN Card Information
                                        </div>
                                    </a> -->
                                </div>
                            </div>
                            <div style="border-bottom:1px solid rgb(240, 240, 240);box-sizing:border-box;margin:0px;padding:0px;"></div>
                        </div>

                        <!-- PAYMENTS -->
                        <div style="box-sizing:border-box;margin:0px;padding:0px;">
                            <div style="padding-bottom:12px;box-sizing:border-box;margin:0px;">
                                <div style="padding:20px 12px 5px 24px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px;">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMyIgaGVpZ2h0PSIyMiIgdmlld0JveD0iMCAwIDIzIDIyIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC05LjY5NCAtOSkiPjxlbGxpcHNlIGN4PSIyMC41NTciIGN5PSIyMCIgcng9IjIwLjU1NyIgcnk9IjIwIi8+PHBhdGggZD0iTTcgNmgyOHYyOEg3eiIvPjxwYXRoIGZpbGw9IiMyODc0RjAiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTMxLjUgMjd2MS4xNjdhMi4zNCAyLjM0IDAgMCAxLTIuMzMzIDIuMzMzSDEyLjgzM2EyLjMzMyAyLjMzMyAwIDAgMS0yLjMzMy0yLjMzM1YxMS44MzNBMi4zMzMgMi4zMzMgMCAwIDEgMTIuODMzIDkuNWgxNi4zMzRhMi4zNCAyLjM0IDAgMCAxIDIuMzMzIDIuMzMzVjEzSDIxYTIuMzMzIDIuMzMzIDAgMCAwLTIuMzMzIDIuMzMzdjkuMzM0QTIuMzMzIDIuMzMzIDAgMCAwIDIxIDI3aDEwLjV6TTIxIDI0LjY2N2gxMS42Njd2LTkuMzM0SDIxdjkuMzM0em00LjY2Ny0yLjkxN2MtLjk3IDAtMS43NS0uNzgyLTEuNzUtMS43NXMuNzgtMS43NSAxLjc1LTEuNzVjLjk2OCAwIDEuNzUuNzgyIDEuNzUgMS43NXMtLjc4MiAxLjc1LTEuNzUgMS43NXoiLz48L2c+PC9zdmc+" 
                                    style="width: 20px;height:20px;text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px; filter: brightness(0) saturate(100%);" />
                                    <div style="padding:0px 0px 12px 20px;font-size:16px;font-weight:500;color:rgb(0, 0, 0);box-sizing:border-box;margin:0px;">
                                        PAYMENTS
                                    </div>
                                </div>
                                <!-- payment infos -->
                                <div style="box-sizing:border-box;margin:0px;padding:0px;">
                                    <a href="/account/wallet" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                      <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                          Wallet
                                          <% if (user.wallet && user.wallet.balance) { %>
                                            <span style="float:right;padding:0px 20px 0px 5px;color:rgb(56, 142, 60);font-weight:500;box-sizing:border-box;margin:0px;">₹<%= user.wallet.balance.toFixed(2) %></span>
                                          <% } else { %>
                                            <span style="float:right;padding:0px 20px 0px 5px;color:rgb(56, 142, 60);font-weight:500;box-sizing:border-box;margin:0px;">₹0</span>
                                          <% } %>
                                      </div>
                                    </a>
                                    <!-- <a href="/account/giftcard" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            Gift Cards
                                            <span style="float:right;padding:0px 20px 0px 5px;color:rgb(56, 142, 60);font-weight:500;box-sizing:border-box;margin:0px;">₹0</span>
                                        </div>
                                    </a>
                                    <a href="/account/vpadetails" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            Saved UPI
                                        </div>
                                    </a>
                                    <a href="/account/carddetails" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            Saved Cards
                                        </div>
                                    </a> -->
                                </div>
                            </div>

                            <div style="border-bottom:1px solid rgb(240, 240, 240);box-sizing:border-box;margin:0px;padding:0px;"></div>
                        </div>

                        <!-- My STUFF -->
                        <div style="box-sizing:border-box;margin:0px;padding:0px;">
                            <div style="padding-bottom:12px;box-sizing:border-box;margin:0px;">
                                <div style="padding:20px 12px 5px 24px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px;">
                                    <img src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMyIgaGVpZ2h0PSIxOSIgdmlld0JveD0iMCAwIDIzIDE5Ij48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGZpbGw9IiMyODc0RjAiIGZpbGwtcnVsZT0ibm9uemVybyIgZD0iTTIwLjUgMi43NWgtOUw5LjI1LjVIMi41QTIuMjQ3IDIuMjQ3IDAgMCAwIC4yNiAyLjc1bC0uMDEgMTMuNUEyLjI1NyAyLjI1NyAwIDAgMCAyLjUgMTguNWgxOGEyLjI1NyAyLjI1NyAwIDAgMCAyLjI1LTIuMjVWNWEyLjI1NyAyLjI1NyAwIDAgMC0yLjI1LTIuMjV6bS01LjYyNSAzLjM3NWEyLjI1NyAyLjI1NyAwIDAgMSAyLjI1IDIuMjUgMi4yNTcgMi4yNTcgMCAwIDEtMi4yNSAyLjI1IDIuMjU3IDIuMjU3IDAgMCAxLTIuMjUtMi4yNSAyLjI1NyAyLjI1NyAwIDAgMSAyLjI1LTIuMjV6bTQuNSA5aC05VjE0YzAtMS40OTYgMy4wMDQtMi4yNSA0LjUtMi4yNnM0LjUuNzU0IDQuNSAyLjI1djEuMTI1eiIvPjxwYXRoIGQ9Ik0tMi00aDI3djI3SC0yeiIvPjwvZz48L3N2Zz4=" 
                                    style="width: 20px;height:20px;text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px; filter: brightness(0) saturate(100%);" />
                                    <div style="padding:0px 0px 12px 20px;font-size:16px;font-weight:500;color:rgb(0, 0, 0);box-sizing:border-box;margin:0px;">
                                        MY STUFF
                                    </div>
                                </div>
                                <!-- My stuff infos -->
                                <div style="box-sizing:border-box;margin:0px;padding:0px;">
                                      <a href="/account/referrals" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;font-weight:500;color:rgb(40, 116, 240);background-color:rgb(245, 250, 255);box-sizing:border-box;margin:0px;">
                                            My Referrals
                                        </div>
                                    </a>
                                    <!-- <a href="/account/rewards" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            My Coupons
                                        </div>
                                    </a>
                                    <a href="/account/reviews" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            My Reviews &amp; Ratings
                                        </div>
                                    </a>
                                    <a href="/notifications" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            All Notifications
                                        </div>
                                    </a> -->
                                    <a href="/wishlist" style="text-decoration:none solid rgb(33, 33, 33);color:rgb(33, 33, 33);border:0px none rgb(33, 33, 33);outline:rgb(33, 33, 33) none 0px;box-sizing:border-box;margin:0px;padding:0px;">
                                        <div style="font-size:14px;padding:12px 5px 12px 66px;cursor:pointer;box-sizing:border-box;margin:0px;">
                                            My Wishlist
                                        </div>
                                    </a>
                                </div>
                            </div>
                            <div style="border-bottom:1px solid rgb(240, 240, 240);box-sizing:border-box;margin:0px;padding:0px;"></div>
                        </div>

                        <div style="border-bottom:1px solid rgb(240, 240, 240);box-sizing:border-box;margin:0px;padding:0px;"></div>
                        <!-- Logout -->
                        <div style="padding-bottom:12px;box-sizing:border-box;margin:0px;">
                            <div style="padding:20px 12px 5px 24px;width: 100%;display:flex;flex-flow:row wrap;box-sizing:border-box;margin:0px;">
                                 <!-- svg power button -->
                                 <a href="/logout" style="text-decoration: none;">
                                    <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" style="box-sizing:border-box;margin:0px;padding:0px; filter: brightness(0) saturate(100%);">
                                        <path fill="#2874F0" stroke-width="0.3" stroke="#2874F0" d="M13 3h-2v10h2V3zm4.83 2.17l-1.42 1.42C17.99 7.86 19 9.81 19 12c0 3.87-3.13 7-7 7s-7-3.13-7-7c0-2.19 1.01-4.14 2.58-5.42L6.17 5.17C4.23 6.82 3 9.26 3 12c0 4.97 4.03 9 9 9s9-4.03 9-9c0-2.74-1.23-5.18-3.17-6.83z" style="box-sizing:border-box;margin:0px;padding:0px;"></path>
                                    </svg>
                                </a>
                                <span style="width: calc(100% - 26px);padding-left:20px;font-size:16px;font-weight:500;color:rgb(0, 0, 0);cursor:pointer;box-sizing:border-box;margin:0px;padding:0px 0px 0px 20px;">Logout</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="width: 75%;padding-left:16px;box-sizing:border-box;margin:0px;padding:0px 0px 0px 16px;">
                <div style="min-height:300px;box-sizing:border-box;margin:0px;padding:0px;">
                    <!-- card -->
                    <div style="box-sizing:border-box;margin:0px;padding-bottom:40px;background-color:#eeeeee;border-radius:20px;box-shadow:rgba(0, 0, 0, 0.08) 0px 2px 4px 0px;">
                        <div style="padding:24px 32px;box-sizing:border-box;margin:0px;">
                            <!-- Referral Code Card -->
                            <div style="background-color:#fff;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                                <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
                                    <h3 style="font-size:20px;margin:0;font-weight:500;">Your Referral Code</h3>
                                </div>
                                <div style="background-color:#f5f9ff;border:1px dashed #2874F0;border-radius:8px;padding:16px;text-align:center;margin:20px 0;">
                                    <div style="font-size:24px;font-weight:bold;color:#2874F0;letter-spacing:2px;margin-bottom:8px;">
                                        <%= user.referralCode || 'FITFORGE' + user._id.toString().substring(0, 6).toUpperCase() %>
                                    </div>
                                    <p style="margin:8px 0 0;color:#666;">Share this code with friends and earn ₹50 when they sign up!</p>
                                </div>
                                <div style="margin-top:20px;display:flex;gap:10px;justify-content:center;">
                                    <button id="copyCodeBtn" style="background-color:#2874F0;color:white;border:none;padding:10px 20px;border-radius:4px;font-size:16px;cursor:pointer;display:flex;align-items:center;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px;">
                                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                                        </svg>
                                        Copy Code
                                    </button>
                                    <button id="shareBtn" style="background-color:#fff;color:#2874F0;border:1px solid #2874F0;padding:10px 20px;border-radius:4px;font-size:16px;cursor:pointer;display:flex;align-items:center;">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="margin-right:8px;">
                                            <circle cx="18" cy="5" r="3"></circle>
                                            <circle cx="6" cy="12" r="3"></circle>
                                            <circle cx="18" cy="19" r="3"></circle>
                                            <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
                                            <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
                                        </svg>
                                        Share
                                    </button>
                                </div>
                            </div>

                            <!-- How It Works Card -->
                            <div style="background-color:#fff;border-radius:12px;padding:24px;margin-bottom:24px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                                <h3 style="font-size:20px;margin-bottom:16px;font-weight:500;">How It Works</h3>
                                <div style="display:flex;flex-wrap:wrap;gap:20px;margin-top:16px;">
                                    <div style="flex:1;min-width:200px;display:flex;flex-direction:column;align-items:center;text-align:center;">
                                        <div style="width:60px;height:60px;background-color:#e8f0fe;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:12px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2874F0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="9" cy="7" r="4"></circle>
                                                <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                                <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                            </svg>
                                        </div>
                                        <h4 style="margin:0 0 8px;font-size:16px;">Share Your Code</h4>
                                        <p style="margin:0;color:#666;font-size:14px;">Share your unique referral code with friends and family</p>
                                    </div>
                                    <div style="flex:1;min-width:200px;display:flex;flex-direction:column;align-items:center;text-align:center;">
                                        <div style="width:60px;height:60px;background-color:#e8f0fe;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:12px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2874F0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                                <circle cx="8.5" cy="7" r="4"></circle>
                                                <line x1="20" y1="8" x2="20" y2="14"></line>
                                                <line x1="23" y1="11" x2="17" y2="11"></line>
                                            </svg>
                                        </div>
                                        <h4 style="margin:0 0 8px;font-size:16px;">Friend Signs Up</h4>
                                        <p style="margin:0;color:#666;font-size:14px;">They use your code during registration</p>
                                    </div>
                                    <div style="flex:1;min-width:200px;display:flex;flex-direction:column;align-items:center;text-align:center;">
                                        <div style="width:60px;height:60px;background-color:#e8f0fe;border-radius:50%;display:flex;align-items:center;justify-content:center;margin-bottom:12px;">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2874F0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <line x1="12" y1="1" x2="12" y2="23"></line>
                                                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                            </svg>
                                        </div>
                                        <h4 style="margin:0 0 8px;font-size:16px;">Earn Rewards</h4>
                                        <p style="margin:0;color:#666;font-size:14px;">Get ₹50 added to your wallet for each successful referral</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Referral Stats Card -->
                            <div style="background-color:#fff;border-radius:12px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                                <h3 style="font-size:20px;margin-bottom:16px;font-weight:500;">Your Referral Stats</h3>
                                <div style="display:flex;flex-wrap:wrap;gap:20px;margin-top:16px;">
                                    <div style="flex:1;min-width:150px;background-color:#f8f8f8;border-radius:8px;padding:16px;text-align:center;">
                                        <div style="font-size:32px;font-weight:bold;color:#2874F0;margin-bottom:8px;">
                                            <%= referrals ? referrals.length : 0 %>
                                        </div>
                                        <p style="margin:0;color:#666;">Total Referrals</p>
                                    </div>
                                    <div style="flex:1;min-width:150px;background-color:#f8f8f8;border-radius:8px;padding:16px;text-align:center;">
                                        <div style="font-size:32px;font-weight:bold;color:#388E3C;margin-bottom:8px;">
                                            ₹<%= (referrals ? referrals.length : 0) * 50 %>
                                        </div>
                                        <p style="margin:0;color:#666;">Total Earned</p>
                                    </div>
                                    <div style="flex:1;min-width:150px;background-color:#f8f8f8;border-radius:8px;padding:16px;text-align:center;">
                                        <div style="font-size:32px;font-weight:bold;color:#388E3C;margin-bottom:8px;">
                                            ₹<%= user.referralBalance %>
                                        </div>
                                        <p style="margin:0;color:#666;">Referral Balance</p>
                                    </div>
                                </div>
                                
                                <!-- Add Redeem Button -->
                                <div style="margin-top:20px;text-align:center;">
                                    <button id="redeemBtn" style="background-color:<%= user.referralBalance >= 100 ? '#388E3C' : '#e0e0e0' %>;color:white;border:none;padding:12px 24px;border-radius:4px;font-size:16px;cursor:<%= user.referralBalance >= 100 ? 'pointer' : 'not-allowed' %>;font-weight:500;transition:all 0.3s ease;">
                                        Redeem to Wallet
                                    </button>
                                    <p style="margin-top:8px;font-size:13px;color:#666;">
                                        <%= user.referralBalance >= 100 ? 'You can now redeem your earnings to your wallet!' : 'You need at least ₹100 in referral balance to redeem to your wallet.' %>
                                    </p>
                                </div>
                                
                                <% if (referrals && referrals.length > 0) { %>
                                    <div style="margin-top:24px;">
                                        <h4 style="font-size:16px;margin-bottom:12px;">Recent Referrals</h4>
                                        <div style="max-height:300px;overflow-y:auto;">
                                            <table style="width:100%;border-collapse:collapse;">
                                                <thead>
                                                    <tr style="border-bottom:1px solid #ddd;">
                                                        <th style="padding:12px 8px;text-align:left;">Name</th>
                                                        <th style="padding:12px 8px;text-align:left;">Date</th>
                                                        <th style="padding:12px 8px;text-align:right;">Reward</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% referrals.forEach(function(referral) { %>
                                                        <tr style="border-bottom:1px solid #eee;">
                                                            <td style="padding:12px 8px;"><%= referral.name %></td>
                                                            <td style="padding:12px 8px;"><%= new Date(referral.date).toLocaleDateString() %></td>
                                                            <td style="padding:12px 8px;text-align:right;">₹50</td>
                                                        </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                <% } else { %>
                                    <div style="margin-top:24px;text-align:center;padding:20px;background-color:#f8f8f8;border-radius:8px;">
                                        <p style="margin:0;color:#666;">You haven't received any referrals yet. Share your code to start earning!</p>
                                    </div>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Copy referral code to clipboard
        document.getElementById('copyCodeBtn').addEventListener('click', function() {
            const referralCode = '<%= user.referralCode || "FITFORGE" + user._id.toString().substring(0, 6).toUpperCase() %>';
            navigator.clipboard.writeText(referralCode).then(function() {
                Swal.fire({
                    icon: 'success',
                    title: 'Copied!',
                    text: 'Referral code copied to clipboard',
                    showConfirmButton: false,
                    timer: 1500
                });
            }).catch(function(err) {
                console.error('Could not copy text: ', err);
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Failed to copy referral code'
                });
            });
        });

        // Share referral code
        document.getElementById('shareBtn').addEventListener('click', function() {
            const referralCode = '<%= user.referralCode || "FITFORGE" + user._id.toString().substring(0, 6).toUpperCase() %>';
            const shareText = `Join FitFORGE using my referral code: ${referralCode} and get exclusive offers!`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'FitFORGE Referral',
                    text: shareText,
                    url: window.location.origin + '/signup'
                }).then(() => {
                    console.log('Thanks for sharing!');
                }).catch(console.error);
            } else {
                // Fallback for browsers that don't support the Web Share API
                Swal.fire({
                    title: 'Share Your Referral Code',
                    html: `
                        <div style="text-align:left;margin-bottom:15px;">
                            <p>Share this message with your friends:</p>
                            <textarea readonly style="width:100%;height:80px;padding:10px;margin-top:10px;border:1px solid #ddd;border-radius:4px;">${shareText}\n\n${window.location.origin}/signup</textarea>
                        </div>
                    `,
                    showCancelButton: true,
                    confirmButtonText: 'Copy to Clipboard',
                    cancelButtonText: 'Close'
                }).then((result) => {
                    if (result.isConfirmed) {
                        const textArea = document.querySelector('textarea');
                        navigator.clipboard.writeText(textArea.value).then(function() {
                            Swal.fire({
                                icon: 'success',
                                title: 'Copied!',
                                text: 'Message copied to clipboard',
                                showConfirmButton: false,
                                timer: 1500
                            });
                        }).catch(function(err) {
                            console.error('Could not copy text: ', err);
                        });
                    }
                });
            }
        });
        
        // Redeem referral earnings
       // Replace the redeemBtn event listener in the script section
document.getElementById('redeemBtn').addEventListener('click', function() {
    const referralBalance = <%= user.referralBalance  %>;
    
    if (referralBalance < 100) {
        Swal.fire({
            icon: 'warning',
            title: 'Not Enough Earnings',
            text: 'You need at least ₹100 in referral balance to redeem to your wallet.',
            confirmButtonColor: '#2874F0'
        });
        return;
    }
    
    Swal.fire({
        title: 'Redeem Earnings?',
        text: `Are you sure you want to redeem ₹${referralBalance} to your wallet?`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#388E3C',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, Redeem Now'
    }).then((result) => {
        if (result.isConfirmed) {
            // Send AJAX request to redeem earnings
            fetch('/redeem-referrals', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        icon: 'success',
                        title: 'Redeemed Successfully!',
                        text: data.message,
                        confirmButtonColor: '#2874F0'
                    }).then(() => {
                        // Reload the page to show updated balances
                        window.location.reload();
                    });
                } else {
                    Swal.fire({
                        icon: 'error',
                        title: 'Redemption Failed',
                        text: data.message,
                        confirmButtonColor: '#2874F0'
                    });
                }
            })
            .catch(error => {
                console.error('Error redeeming referrals:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Something went wrong. Please try again later.',
                    confirmButtonColor: '#2874F0'
                });
            });
        }
    });
});
    });
</script>

<%- include('../partials/user/footer') %>

